# 数据差异化更新说明

## 📋 更新概述

本次更新调整了初始化数据生成逻辑，确保**每个宠物生成的数据都具有明显差异**，使数据更加真实和多样化。

## 🎯 主要改进

### 1. 步数范围差异化

**之前**：所有宠物的步数都集中在 3000-12000 步范围内
**现在**：步数范围扩展到 1800-16000 步，覆盖从极低活跃到极高活跃的各种情况

| 宠物 | 基础步数 | 活动等级 | 说明 |
|------|---------|---------|------|
| 咪咪 (CAT002) | 1800步 | 极低 | 懒猫，很少活动 |
| 豆豆 (DOG001) | 2100步 | 低 | 对应图片中显示的低活跃度 |
| 小白 (CAT003) | 3200步 | 低 | 室内猫，活动量小 |
| 雪糕 (DOG005) | 4500步 | 中 | 小型犬，适度活动 |
| 喵喵 (CAT001) | 5500步 | 中 | 中等活跃的猫 |
| 橘子 (CAT004) | 6800步 | 中 | 活跃的猫 |
| 芝麻 (CAT005) | 7200步 | 中 | 爱玩的猫 |
| 黑子 (DOG004) | 8500步 | 高 | 工作犬，活跃 |
| 旺财 (DOG002) | 12000步 | 高 | 大型犬，运动量大 |
| 大黄 (DOG003) | 16000步 | 极高 | 极度活跃的工作犬 |

### 2. 新增活动等级配置

```javascript
const ACTIVITY_LEVELS = {
  very_low: { stepMultiplier: 0.5, activeHours: 4 },   // 新增
  low: { stepMultiplier: 0.7, activeHours: 6 },
  medium: { stepMultiplier: 1.0, activeHours: 8 },
  high: { stepMultiplier: 1.3, activeHours: 10 },
  very_high: { stepMultiplier: 1.6, activeHours: 12 }
};
```

### 3. 每日变化幅度 (dailyVariation)

每个宠物新增 `dailyVariation` 参数，使每天的数据有自然波动：

| 宠物 | 每日变化 | 效果 |
|------|---------|------|
| 咪咪 | 5% | 数据非常稳定 |
| 豆豆 | 10% | 小幅波动 |
| 小白 | 12% | 适度波动 |
| 雪糕 | 14% | 适度波动 |
| 旺财 | 15% | 中等波动 |
| 芝麻 | 16% | 中等波动 |
| 黑子 | 18% | 较大波动 |
| 喵喵 | 20% | 较大波动 |
| 橘子 | 22% | 显著波动 |
| 大黄 | 25% | 最大波动 |

### 4. 体温差异

根据物种特征调整体温波动范围：
- **狗**：±0.3℃（体温波动较大）
- **猫**：±0.2℃（体温较稳定）

### 5. 活动时间差异

不同活动等级的宠物，GPS 轨迹生成的活动时间不同：
- **极低活跃**：6:00 - 10:00（4小时）
- **低活跃**：6:00 - 12:00（6小时）
- **中等活跃**：6:00 - 14:00（8小时）
- **高活跃**：6:00 - 16:00（10小时）
- **极高活跃**：6:00 - 18:00（12小时）

## 📝 修改的文件

### 1. `scripts/importQuickData.js` ✅
- 更新宠物配置，添加 `dailyVariation` 字段
- 调整 `baseSteps` 为更多样化的值
- 新增 `very_low` 活动等级
- 优化数据生成逻辑，增加每日波动

### 2. `scripts/importMultiPetData.js` ✅
- 同步 `importQuickData.js` 的所有改动
- 保持7天数据导入功能

### 3. `scripts/importTestData.js` ✅
- 添加 `PET_CONFIG` 配置对象
- 支持配置单个宠物的特征
- 默认配置为低活跃度（2100步），对应图片显示

### 4. `docs/MULTI-PET-GUIDE.md` ✅
- 更新宠物列表表格，添加"每日变化"列
- 新增"宠物特征说明"章节
- 更新步数范围说明

## 🔍 数据示例对比

### 豆豆 (DOG001) - 低活跃度
```
基础步数: 2100
活动等级: low (× 0.7)
实际每日步数: ~1470 步
活动时间: 6:00-12:00
体温范围: 38.2-38.8℃
每日变化: ±10%
```

### 大黄 (DOG003) - 极高活跃度
```
基础步数: 16000
活动等级: very_high (× 1.6)
实际每日步数: ~25600 步
活动时间: 6:00-18:00
体温范围: 38.3-38.9℃
每日变化: ±25%
```

## ✅ 验证步骤

1. **重新导入数据**：
   ```bash
   node scripts/importQuickData.js
   ```

2. **启动服务**：
   ```bash
   npm start
   ```

3. **验证不同宠物**：
   - 访问 `http://localhost:3000`
   - 切换不同宠物，观察数据差异
   - 豆豆 (DOG001) 应显示 ~2100 步（低活跃）
   - 大黄 (DOG003) 应显示 ~25000 步（极高活跃）

## 🎨 前端显示效果

每个宠物现在会显示：
- **不同的今日步数**（1470 - 25600）
- **不同的活动进度**（对应目标步数的百分比）
- **不同的活动趋势**（根据每日变化产生不同的对比）
- **不同的体温波动**（狗和猫的差异）
- **不同的GPS活动范围**（活动时间长短不同）

## 🚀 后续优化建议

1. 可以为每个宠物设置不同的 `STEPLIMIT`（目标步数）
2. 根据宠物年龄调整活动等级
3. 添加季节性变化（夏天/冬天活动量不同）
4. 增加周末和工作日的差异

## 📊 数据对比总结

| 特征 | 之前 | 现在 |
|------|------|------|
| 步数范围 | 3000-12000 | 1800-16000 |
| 活动等级 | 4种 | 5种 |
| 每日变化 | 无 | 5%-25% |
| 体温差异 | 统一±0.5℃ | 狗±0.3℃，猫±0.2℃ |
| 活动时间 | 固定 | 4-12小时不等 |
| 数据真实度 | 中 | 高 |

## ✨ 总结

本次更新使每个宠物的初始化数据都具有独特的特征，从极低活跃的室内猫（咪咪，1800步）到极度活跃的工作犬（大黄，16000步），覆盖了各种真实场景，让数据展示更加丰富和真实。
